{% case site.color-scheme %}
{% when "", nil, false, 0, empty %}
{% assign ColorScheme = "auto" %}
{% else %}
{% assign ColorScheme = site.color-scheme %}
{% endcase %}

<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% seo %}
    <link rel="stylesheet" href="{{ "/assets/css/colors-ColorScheme.css?v=" | replace: "ColorScheme", ColorScheme | append: site.github.build_revision | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/css/style.css?v=" | append: site.github.build_revision | relative_url }}">
    <link rel="icon" href="{{ '/assets/img/favicon.png' | relative_url }}" type="image/png">
    <link rel="preload" href="{{site.logo | relative_url}}" as="image">
    <!--- Graficos -->
    <!-- Mermaid.js 
      <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
      <script>
        mermaid.initialize({ startOnLoad: true });
      linkStyle default stroke: white
      </script>
      -->
      <script>
        // Al cargar el DOM, convertimos <pre><code class="language-mermaid"> en <div class="mermaid">
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('pre > code.language-mermaid').forEach((block) => {
    const pre = block.parentNode;
    const div = document.createElement('div');
    div.className = 'mermaid';
    div.textContent = block.textContent;
    pre.parentNode.replaceChild(div, pre);
  });
  // --- Aqu√≠ van tus ajustes de tema ---
  mermaid.initialize({
    startOnLoad: true,
    theme: 'dark',           // <‚Äî activa el tema oscuro
    themeVariables: {        // <‚Äî personaliza colores
      lineColor: '#ffffff',
      primaryColor: '#222222',
      edgeLabelBackground: '#111111',
      textColorPrimary: '#ffffff',
      arrowMarkerAbsolute: true
    }
  });
});
</script>
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>





<!--- Math --> 
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$']],
    }
  };
</script>
<script type="text/javascript" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>

{% include head-custom.html %}
  </head>
  <body>
    <div class="wrapper">

    <!-- üîò Bot√≥n SIEMPRE visible -->
    <button id="menu-toggle"
            class="menu-toggle"
            aria-label="Abrir/cerrar men√∫"
            aria-expanded="true"
            aria-controls="site-sidebar">
      ‚ò∞
    </button>




      <div class="sidebar" id="site-sidebar">
        <header>
          {%- include header.html -%}
        </header>
        {% include mobile.html %}
        <div class="sidebar-footer">
          {%- include footer.html -%}
        </div>
      </div>
      <section>
        {{ content }}
      </section>
      <footer>
        {%- include footer.html -%}
      </footer>
    </div>
    <script src="{{ "/assets/js/scale.fix.js" | relative_url }}"></script>
    <script>
(function () {
  const btn = document.getElementById('menu-toggle');
  const sidebar = document.getElementById('site-sidebar');

  if (!btn || !sidebar) return;

  const isMobile = () => window.matchMedia('(max-width: 992px)').matches;

  function setState(open) {
    if (isMobile()) {
      sidebar.classList.toggle('is-open', open);
      sidebar.classList.toggle('is-collapsed', !open);
    } else {
      sidebar.classList.toggle('is-collapsed', !open);
    }
    btn.setAttribute('aria-expanded', String(open));
  }

  // Estado inicial: abierto en desktop, cerrado en m√≥vil
  setState(!isMobile() ? true : false);

  btn.addEventListener('click', () => {
    const openNow = btn.getAttribute('aria-expanded') !== 'true';
    setState(openNow);
  });

  // Recalcular al redimensionar
  window.addEventListener('resize', () => {
    setState(!isMobile());
  });
})();
</script>

  </body>
</html>
